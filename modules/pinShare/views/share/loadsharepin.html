<script type="text/javascript" src="/assets/modules/pinShare/js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="/assets/modules/pinShare/js/pinShare.js"></script>
       <script type="text/javascript" src="/assets/modules/pinShare/js/jquery.masonry.min.js"></script>
        <script type="text/javascript" src="/assets/modules/pinShare/js/imagesloaded.pkgd.min.js"></script>
        <script type="text/javascript" src="/assets/modules/pinShare/js/jquery-validation.js"></script>

<style type="text/css">
  
/*----------new--------*/
    .button_yellow{
		background:#f2b33d;
		border-radius:5px;
		padding:8px 10px;
		color:#333;
		border:none;
		font-weight: bold;
	}
	.button_yellow:hover{
		color:#f2b33d;
		background:#333;
		cursor:pointer;
	}
	.inputText_popup {
		border: 1px solid #ccc;
		padding: 8px 1%;
		margin: 15px 0 0 15px;
		width:92%;
	}
	.wrapper_popup{
		width:400px;
                
		margin:0 auto;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.44);
	}
    .heading_popup{
		border-bottom: 1px solid #e7e7e7;
		color: #333333;
		font-size: 12px;
		margin: 0;
		min-height: 20px;
		padding: 17px 18px 13px 18px;
	}
	.rmng_popup{
		border-bottom: 1px solid #e7e7e7;
		color: #333333;
		font-size: 14px;
		margin: 0;
		min-height: 20px;
		padding: 0px 0px 13px 0px;
	}
	.conts_popup{
		height:215px;
		overflow-y:auto;
		overflow-x:hidden;
	}
	.heading_popup h1{
		margin:0;
	}
	.formFooter {
		background: #f0f0f0;
		clear: both;
		padding: 6px 15px;
	}
		.multi-imgs{
		width:100%;
		height:200px;
		padding:0 15px;
		margin:0;
	}
	.multi-imgs li{
		list-style:none;
		float:left;
		margin-right:5px;
		margin-top:5px;
		border:1px solid #e7e7e7;
	}
	.multi-imgs li:last-child{
		margin-right:0;
	}
        </style>
<!--<div class="modal_pou_up" >
    <div class="add_pin_top_ab3 custom-model add_pin_top" >
        <div class="modal-content">-->


            <!--  Head  -->
            {{#if data}}        
            {{#each data}} 
            <div class="add_pin">
                <div class="row">
                    <div class="col-md-12">
                        <div class="add_pin_web_site">

                            <div id="pop_cont"> 
                                <img src="/default/images/ajax-loader.gif" id="loading2" style="display:none;"/>


                                {{#ifCond pin_type 'image'}}

                                <!--                                <div id="selectImage" >-->
                                <div class="wrapper_popup" id="selectImage">
                                    <div class="heading_popup">
                                        <h1>Pin Image</h1>
                                    </div>
                                    <form method="post" id="image_form" action="/pin_action">



                                        <div class="rmng_popup">
                                            <input type="hidden" name="full_url" value="{{pin_url}}" /> 
                                            <select name="board_id" id="board_id" class="inputText required inputText_popup">
                                                <option value="" selected="selected">Select Board</option>
                                                {{#each boards}}
                                                <option value="{{this._id}}">{{this.board_name}}</option>
                                                {{/each}}
                                            </select>  

                                            </select>
                                        </div>

                                       

                                        <div class="rmng_popup">
                                            <div class="conts_popup">
                                                
                                                <ul class="multi-imgs">
                                                    {{#if contents}}
                                                    {{#each contents}}

                                                    <li class="elem hiddenElem">
                                                        <span class="image-checkbox-container">
                                                            <input type="checkbox" checked="checked"  name="img_chkbox[]" class="img_chkbox" id="c{{@index}}" value="{{this}}" />
                                                            <input type="hidden" name="urls[]" value="{{this}}" />
                                                            <img src="{{this}}"  width="120px"/>
                                                        </span>
                                                    </li>
                                                    {{/each}}
                                                    {{else}}
                                                    No images found.
                                                    {{/if}}
                                                </ul>
                                            </div>               
                                        </div>
                                        <div class="rmng_popup">
                                            <textarea name="description" id="description" placeholder="Description" class="inputText required inputText_popup"></textarea>
                                        </div>
                                        <div class="formFooter common-share">
                                            <input type="button" name="Pinit" class="sharepin common-share button_yellow pin_it pint_close" value="Pin It" style="display: inline-block;">
                                        </div>


                                    </form>
                                </div>

                                {{/ifCond}}
                                {{#ifCond pin_type 'audio'}}
                                <div id="webaudioForm" class="wrapper_popup">
                                   
                                     <div class="heading_popup">
                                         <h1>Pin audio file from SoundCloud</h1>
                                    </div>
                                    <form id="webaudioUploadFromComputer" name="webaudio_form" method="post" action="/webaudio_action" >
                                        <input type="hidden" name="full_url" value="{{pin_url}}" /> 
                                        <div class="rmng_popup">
                                           <input type="hidden" value="video" name="pin_cat"/>
                                            <select name="board_id" id="board_id" class="inputText required inputText_popup">
                                                <option value="" selected="selected">Select Board</option>
                                                {{#each boards}}
                                                <option value="{{this._id}}">{{this.board_name}}</option>
                                                {{/each}}
                                            </select>  

                                            </select>
                                        </div>
                                        <div class="rmng_popup">
                                        <input type="text"  class="inputText required" name="url" id="url" value="{{pin_url}}"  />
<!--                                        <div id="show_song" style="width:96%; margin:15px auto 0 15px;"></div>-->
                                        </div>
                                        <div id="show_song" style="width:96%; margin:15px auto 0 15px;">
<!--                                            <object height="100" width="100%" id="yourPlayerId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><embed allowscriptaccess="always" src="http://player.soundcloud.com/player.swf?url=https://soundcloud.com/macklemore/macklemore-x-ryan-lewis-cant&amp;enable_api=true&amp;sharing=false&amp;show_comments=false&amp;show_user=false&amp;buying=false&amp;download=false&amp;show_artwork=false&amp;liking=false" type="application/x-shockwave-flash" height="100" width="100%" name="scloud_id">-->
                                            </object></div>
                                        
                                        <div class="rmng_popup">
                                            <textarea name="description" id="description" placeholder="Description" class="inputText required inputText_popup"></textarea>
                                        </div>
                                        <div class="formFooter common-share">
                                            <input type="button" name="Pinit" class="sharepin common-share button_yellow pin_it pint_close" value="Pin It" style="display: inline-block;">
                                        </div>
                                    </form>
                                </div>
                                {{/ifCond}}

                                <!-- youtube form -->
                                {{#ifCond pin_type 'video'}}
                                <div id="youtubeForm" class="wrapper_popup">
                                   <div class="heading_popup">
                                        <h1>Pin Video</h1>
                                    </div>
                                    <form id="videoUploadFromYoutube" method="post" action="/pinpage" enctype="multipart/form-data" >
                                        <input type="hidden" name="full_url" value="{{pin_url}}" />                                             
                                        <div class="rmng_popup">
                                           <input type="hidden" value="video" name="pin_cat"/>
                                            <select name="board_id" id="board_id" class="inputText required inputText_popup">
                                                <option value="" selected="selected">Select Board</option>
                                                {{#each boards}}
                                                <option value="{{this._id}}">{{this.board_name}}</option>
                                                {{/each}}
                                            </select>  

                                            </select>
                                        </div>
                                        <div class="rmng_popup">
                                        <input type="url" id="url" name="url" class="inputText required" value="http://www.youtube.com/{{#if contents}}watch?v={{contents}}{{/if}}" placeholder="Youtube URL" />
                                        </div>
<!--                                         <div class="rmng_popup">-->
                                        <iframe id="preview_id" src="" frameborder="0" style="display: none; margin-left: 20px;"></iframe>
<!--                                         </div>-->
                                         <div class="rmng_popup">
                                            <textarea name="description" id="description" placeholder="Description" class="inputText required inputText_popup"></textarea>
                                        </div>
                                        <div class="formFooter">
                                            <input type="button" name="Pinit" class="sharepin common-share button_yellow pin_it pint_close" value="Pin It" style="display: inline-block;">
                                        </div>
                                        
                                    </form>
                                </div>
                                {{/ifCond}}
                                <!-- webpage form -->
                                {{#ifCond pin_type 'web_page'}}
                                <div id="webpageForm" class="wrapper_popup">
                                    
                                    <div class="heading_popup">
                                        <h1>Add Webpage</h1>
                                    </div>
                                    <form id="webpageUpload" method="post" action="/pinpage" enctype="multipart/form-data" > 
                                        <input type="hidden" name="full_url" value="{{pin_url}}" /> 
                                        <input type="hidden" value="webpage" name="pin_cat"/>
                                       
                                        <div class="rmng_popup">
                                          
                                            <select name="board_id" id="board_id" class="inputText required inputText_popup">
                                                <option value="" selected="selected">Select Board</option>
                                                {{#each boards}}
                                                <option value="{{this._id}}">{{this.board_name}}</option>
                                                {{/each}}
                                            </select>  

                                            </select>
                                        </div>
                                       
                                        <input type="url" id="url" name="url" class="inputText required inputText_popup" value="{{pin_url}}" placeholder="Web URL"/>
                                        
                                        <img src="/default/images/ajax-loader.gif" id="loading_web" style="display:none; margin-left: 20px;"/>
                                        <img id="webpageshot" src="" style="display:none; margin-left: 20px;" width="250" height="250"/>       
                                        <div class="rmng_popup">
                                            <textarea name="description" id="description" placeholder="Description" class="inputText required inputText_popup"></textarea>
                                        </div>
                                        <div class="formFooter common-share">
                                            <input type="button" name="Pinit" class="sharepin common-share button_yellow pin_it pint_close" value="Pin It" style="display: inline-block;">
                                        </div>
                                    </form>
                                </div>
                                {{/ifCond}}
                                <!-- end addpin forms -->

                            </div>

                            <!--</form>-->
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
            </div>
            {{/each }} 
            {{/if}}

<!--        </div>
    </div>
</div>-->

<script>
    /* to clear pop up contents on each close */
    $("#myModal2").on('hidden.bs.modal', function () {
        $(this).data('bs.modal', null);
    });
    window.localStorage.removeItem('cubetSharepinId');
    $(function(){
        $('.common-share').show();
       
        $('.pint_close').click(function(){
           
             $('#loading2').show();
            var form = $(this).parents('form');
           
            form.validate();
            if(form.valid()){
                $.ajax({
                    type: 'post',
                    url: form.attr('action'),
                    data: form.serialize(),
                    success: function(){
                        $('#loading2').hide();
                        window.close();
                    },
                    error: function(){
                         $('#loading2').hide();
                        alert(1);
                    }
                });
            }
            
        
         
        })
        
        var mOpts = {
                itemSelector : '.elem',
                isFitWidth: true,
                isResizable: true,
                gutterWidth: 15,
                isAnimated: false,
                animationOptions: {
                    duration: 300,
                    easing: 'linear',
                    queue: false
                }
            }
if($('.multi-imgs').lenght>0)
{
$('.multi-imgs').masonry(mOpts);
}      
    });
        
    $(window).load(function(){
        if($('.multi-imgs').lenght>0)
{
$('.multi-imgs').masonry('reload');
}      
   
        /* first time load default view */
        //$("#loading2").css({'display':'block'});
        
        imageFunctions();
       
        if($('#webpageUpload #url').length>0){
       
            $('#loading_web').css({'display':'block'});
            var url = $('#webpageUpload #url').val();
        
            $.post('/screenshot',{'pageurl' : url},function(data,status){
                $("#webpageshot").attr("src", "/pins/images/temp/" + data.image).css({'display':'block','max-width':'680px'});
                $('#loading_web').css({'display':'none'});
            });
            return false;
        }
        if($('#videoUploadFromYoutube #url').length>0){
    
            var url = $('#videoUploadFromYoutube #url').val();
       
            if (url != '') {
                var matches = url.match(/^http:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?:\S+)?$/);
                //            if (matches) {
                var split_url = url.split("v=");
                var videoId = split_url[1];
                var embedCode = 'http://www.youtube.com/embed/' + videoId ; 
                $('#url').css({'border':'1px solid #ccc'}); 
                $("#preview_id").attr('src',embedCode).css({'display':'block'});
                //            } else {
                //                $('#url').css({'border':'1px solid red'}); 
                //            }
                //            
            } else {
                $('#url').css({'border':'1px solid red'}); 
            }
            return false;
        }
        if($('#url').length>0){
 
            if($("#url").val()!==''){
                var str = '<object height="100" width="100%" id="yourPlayerId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'
                    +'<embed allowscriptaccess="always" src="http://player.soundcloud.com/player.swf?url='+$("#url").val()
                    +'&enable_api=true&sharing=false&show_comments=false&show_user=false&buying=false&download=false&show_artwork=false&liking=false" type="application/x-shockwave-flash" height="100" width="100%" name="scloud_id"></embed>'
                    +'</object>';
                $("#show_song").html(str);
            }
        }
       

    });    




    function imageFunctions(){
        $("#imageForm").show();
        $("#imageForm input[type=radio][name=sub][value=local]").attr('checked','checked');
        $('#get_img').html('Upload');
        $('#get_img').unbind('click').bind('click',function(){
            $("#uploadFromComputer").validate();
            $('#uploadFromComputer').submit(); 
        });
        $("input[type=radio][name=sub]").unbind('click').bind('click',function(){
            var subtype = $("input[type=radio][name=sub]:checked").val();
            //alert(subtype);
            //clearing form fields,checkboxes and error messages
            $("input:radio").removeAttr('checked');
            $('input,select,textarea').removeClass('error').removeAttr('style');
            $('.errmsg,.msg').text('');
            if(subtype=='web'){
                $("#imageForm").hide();
                $('#imgUploadFromURL').get(0).reset();
                $("#urlForm").show(); 
                $("#urlForm input[type=radio][name=sub][value=web]").attr('checked','checked');
                $('#get_img').html('Find Images');
                $('#get_img').unbind('click').bind('click', function(){
                    actionFunction();
                });
                $(document).keypress(function(e) {
                    if(e.keyCode == 13) {
                        actionFunction();
                        return false; // set default event to false
                    }
                });
            } else if(subtype=='local'){
                $("#urlForm").hide();
                $('#uploadFromComputer').get(0).reset();
                $("#imageForm").show();
                $("#imageForm input[type=radio][name=sub][value=local]").attr('checked','checked');
                $('#get_img').html('Upload');
                $('#get_img').unbind('click').bind('click',function(){
                    $("#uploadFromComputer").validate();
                    $('#uploadFromComputer').submit(); 
                });
            } 
        });
    }

    function audioFunctions(){
        $("#audioForm").show();
        $("#audioForm input[type=radio][name=sub][value=local]").attr('checked','checked');
        $('#get_img').html('Upload');
        $('#get_img').unbind('click').bind('click',function(){
            $("#audioUploadFromComputer").validate();
            $('#audioUploadFromComputer').submit(); 
        });
        $("input[type=radio][name=sub]").unbind('click').bind('click',function(){
            var subtype = $("input[type=radio][name=sub]:checked").val();
            //clearing form fields,checkboxes and error messages
            $("input:radio").removeAttr('checked');
            $('input,select,textarea').removeClass('error').removeAttr('style');
            $('.errmsg,.msg').text('');
            if(subtype=='web'){
                $("#audioForm").hide();
                $('#webaudioUploadFromComputer').get(0).reset();
                $("#show_song").html('');
                $("#webaudioForm").show(); 
                $("#webaudioForm input[type=radio][name=sub][value=web]").attr('checked','checked');
                $('#get_img').html('Pin Audio');
                $('#get_img').unbind('click').bind('click',function(){
                    $("#webaudioUploadFromComputer").validate({rules: {url: "url"}}); 
                    $('#webaudioUploadFromComputer').submit(); 
                });
            } else if(subtype=='local'){
                $("#webaudioForm").hide();
                $('#audioUploadFromComputer').get(0).reset();
                $("#audioForm").show();
                $("#audioForm input[type=radio][name=sub][value=local]").attr('checked','checked');
                $('#get_img').html('Upload');
                $('#get_img').unbind('click').bind('click',function(){
                    $("#audioUploadFromComputer").validate();
                    $('#audioUploadFromComputer').submit(); 
                });
            } 
        });
    }

    function videoFunctions(){
        $("#videoForm").show();
        $("#videoForm input[type=radio][name=sub][value=local]").attr('checked','checked');
        $('#get_img').html('Upload');
        $('#get_img').unbind('click').bind('click',function(){
            $("#videoUploadFromComputer").validate();
            $('#videoUploadFromComputer').submit(); 
        });
        $("input[type=radio][name=sub]").unbind('click').bind('click',function(){
            var subtype = $("input[type=radio][name=sub]:checked").val();
            //clearing form fields,checkboxes and error messages
            $("input:radio").removeAttr('checked');
            $('input,select,textarea').removeClass('error').removeAttr('style');
            $('.errmsg,.msg').text('');
            if(subtype=='web'){
                $("#videoForm").hide();
                $('#videoUploadFromYoutube').get(0).reset();
                $("#preview_id").hide();
                $("#youtubeForm").show(); 
                $("#youtubeForm input[type=radio][name=sub][value=web]").attr('checked','checked');
                $('#get_img').html('Pin video');
                $('#get_img').unbind('click').bind('click',function(){
                    $("#videoUploadFromYoutube").validate({rules: {video_link: "url"}}); 
                    $('#videoUploadFromYoutube').submit(); 
                });
            } else if(subtype=='local'){
                $("#youtubeForm").hide();
                $('#videoUploadFromComputer').get(0).reset();
                $("#videoForm").show();
                $("#videoForm input[type=radio][name=sub][value=local]").attr('checked','checked');
                $('#get_img').html('Upload');
                $('#get_img').unbind('click').bind('click',function(){
                    $("#videoUploadFromComputer").validate();
                    $('#videoUploadFromComputer').submit(); 
                });
            } 
        });
    }

    function webpageFunctions(){
        $("#webpageForm").show();
        //clearing form fields,checkboxes and error messages
        $("input:radio").removeAttr('checked');
        $('input,select,textarea').removeClass('error').removeAttr('style');
        $('.errmsg,.msg').text('');
        $('#webpageUpload').get(0).reset();
        $("#webpageshot").hide();
        $("#webpageForm").show(); 
        $('#get_img').html('Pin Webpage');
        $('#get_img').unbind('click').bind('click',function(){
            $("#webpageUpload").validate({rules: {url: "url"}}); 
            $('#webpageUpload').submit(); 
        });
    }

    function actionFunction(){
        var str = $("#url").val(); 
        if($("#url").val()==''){
            $("#url").css({'border':'1px solid red'});
            return false;
        } else  if(str.substr(0,4)!='http') {
            $("#url").css({'border':'1px solid red'});
            //alert('Enter a valid URL.');
            $(".errmsg").text("Enter a valid URL.(eg: http://www.example.com)");
            return false;
        } else {
            // alert($("#url").val());
            $("#loading1").css({'display':'block'});
            $.post('/post_url',
            {'url' : $("#url").val() },
            function(data){
                $("#loading1").css({'display':'none'});
                $(".modal_pou_up").html(data);
                //alert(data);
            }
        );
        }
    }

</script>
<div class="crossrider-nofity-43628" index="0"></div><div class="crossrider-nofity-43628-top-left"></div><div class="crossrider-nofity-43628-top-right"></div><div class="crossrider-nofity-43628-bottom-left"></div><div class="crossrider-nofity-43628-bottom-right"></div>
